<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

  <script src="https://cdn.jsdelivr.net/npm/moment@2.29.1/moment.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.5.32/moment-timezone-with-data.min.js"></script>


  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@3.10.2/dist/fullcalendar.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/estilosMainView.css">
  <link rel="stylesheet" href="css/estilosAdmin.css">
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
  <link rel="shortcut icon" href="images/cerebroSentado.jpg">
  <title>NeuroTask</title>
</head>

<body class="fondo">
  <header class="container fondocabecera justify-content-center ">
    <!-- Aqui comienza el contenedor que contiene el logo y el texto de la cabecera  -->
    <%-include('cabecera.ejs')%>
  </header>

  <section class="container justify-content-center mt-2">
    <!-- Contenedor encargado de almacenar la seccion donde apareceran los destinos disponibles -->

    <%if(exito !=null){ %>
      <p class="alert alert-success">
        <%=exito%>
      </p>
      <%} %>

        <%if(error !=null){ %>
          <p class="alert alert-danger">
            <%=error%>
          </p>
          <%} %>

            <div class="row  ">
              <!-- formado por x filas que contienen grupos de 3 destinos los cuales se muestran usando el formato card ubicados dentro de columnas -->
              <div class="col-sm-12 col-md-3 alert bg-white sombraBotonAdmin d-flex flex-column">
                <button class="alert alert-primary botonesAdmin" id="listarPacientes"><strong> Listado de
                    Pacientes</strong>

                </button>
                <button class="alert alert-primary botonesAdmin" id="listarJuegos"> <strong> Listado de Juegos</strong>

                </button>

                <button class="alert alert-primary botonesAdmin" id="btnCrearPaciente" data-bs-toggle="modal"
                  data-bs-target="#crearPaciente"> <strong> Crear Nuevo Paciente</strong>

                </button>

                <button class="alert alert-primary botonesAdmin" id="btnVincularPaciente" data-bs-toggle="modal"
                  data-bs-target="#vincularPaciente"> <strong> Vincular
                    Paciente</strong>

                </button>

                <div class="modal fade" id="crearPaciente" data-bs-backdrop="static">
                  <!-- data-bs impide que se cierre al pulsar fuera del modal -->
                  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                    <div class="modal-content">

                      <!-- cabecera del diálogo -->
                      <div class="modal-header">
                        <h4 class="modal-title">Crear Cuenta</h4>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                      </div>

                      <!-- cuerpo del diálogo -->
                      <div class="modal-body alert alert-primary">

                        <form id="formCrearPaciente" method="post" action="/user/crearPaciente">

                          <div class="mb-2 row">
                            <label for="correoPaciente" class="col-sm-2 col-form-label">Correo:</label>
                            <div class="col-sm-10">
                              <input type="email" class="form-control" id="correoPaciente" name="correoPaciente"
                                required>
                            </div>
                          </div>

                          <div class="mb-3 row">
                            <label for="nombrePaciente" class="col-sm-2 col-form-label">Nombre:</label>
                            <div class="col-sm-4">
                              <input type="text" class="form-control" id="nombrePaciente" name="nombrePaciente"
                                required>
                            </div>
                            <label for="apellidoPaciente" class="col-sm-2 col-form-label">Apellido:</label>
                            <div class="col-sm-4">
                              <input type="text" class="form-control" id="apellidoPaciente" name="apellidoPaciente"
                                required>
                            </div>
                          </div>

                          <div class="mb-3 row">
                            <label for="contraseñaPaciente" class="col-sm-2 col-form-label">Contraseña:</label>
                            <div class="col-sm-4">
                              <input type="password" class="form-control" name="contraseñaPaciente"
                                id="contraseñaPaciente" required>
                              <!--Esto se tiene que validar con js en cliente-->
                            </div>
                            <label for="contraseñaPacienteRep" class="col-sm-2 col-form-label">Repetir
                              Contraseña:</label>
                            <div class="col-sm-4">
                              <input type="password" class="form-control" name="contraseñaPacienteRep"
                                id="contraseñaPacienteRep" required>
                            </div>
                          </div>

                          <div class="mb-3 row">
                            <label for="edadPaciente" id="edadPaciente" class="col-sm-2">Edad:</label>
                            <div class="col-sm-10">
                              <input type="text" id="edadPaciente" class="form-control " name="edadPaciente">
                            </div>
                          </div>

                          <div class="mb-3 row">
                            <div class="offset-sm-3 col-sm-9">
                              <button type="submit" class="btn btn-primary">Confirmar</button>
                              <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Cancelar</button>
                            </div>
                          </div>
                        </form>
                      </div>

                    </div>

                  </div>
                </div>

                <div class="modal fade" id="vincularPaciente" data-bs-backdrop="static">
                  <!-- data-bs impide que se cierre al pulsar fuera del modal -->
                  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                    <div class="modal-content">

                      <!-- cabecera del diálogo -->
                      <div class="modal-header">
                        <h4 class="modal-title">Vincular nuevo paciente</h4>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                      </div>

                      <!-- cuerpo del diálogo -->
                      <div class="modal-body alert alert-primary">

                        <form id="formVincularPaciente" method="post" action="/user/vincularPaciente">

                          <div class="mb-2 row">
                            <label for="correoVincular" class="col-sm-2 col-form-label">Correo:</label>
                            <div class="col-sm-10">
                              <input type="email" class="form-control" id="correoVincular" name="correoVincular"
                                required>
                            </div>
                          </div>

                          <div class="mb-3 row">
                            <div class="offset-sm-3 col-sm-9">
                              <button type="submit" class="btn btn-primary">Vincular</button>
                              <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Cancelar</button>
                            </div>
                          </div>
                        </form>
                      </div>

                    </div>

                  </div>
                </div>

              </div>

              <div class="col-sm-12 col-md-9 alert alert-primary">
                <!-- Aquí van los usuarios -->
                <div id="divListadoUsuarios" class="text-center d-none">
                  <h1 id="tituloUsuarios">Listado de Usuarios</h1>

                  <p class=" alert alert-warning" id="alertaListadoUsuarios">No hay pacientes disponibles</p>

                </div>


                <div id="divListadoJuegos" class=" text-center d-none">
                  <h1>Listado de Juegos</h1>

                  <p class=" alert alert-warning" id="alertaListadoJuegos">No hay juegos disponibles</p>
                </div>

                <div id="cuadranteHistorial" class=" text-center d-none">
                  <h1>Historial de Partidas</h1>
                  <table class="table table-striped " id="tablaHistorial">

                    <thead>
                      <tr>
                        <th scope="col">#</th>
                        <th scope="col">Juego</th>
                        <th scope="col">Categoría</th>
                        <th scope="col">Aciertos</th>
                        <th scope="col">Fallos</th>
                        <th scope="col">Duración (seg)</th>
                        <th scope="col">Fecha</th>
                      </tr>
                    </thead>
                    <tbody id="bodyTablaHistorial">

                    </tbody>
                  </table>

                </div>

                <!--CALENDARIO-->
                <div class="container bg-light rounded pb-3 mx-auto d-none" id="cuadranteCalendario">
                  <div class="row">
                    <div class="col-md-12">
                      <h2 class="text-center">Calendario</h2>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-12 text-center d-flex align-items-center">
                      <div id="calendario" class="calendario mx-auto"></div>
                    </div>
                  </div>

                  <div class=" mt-2 text-center d-none" id="divTablaCalendario">
                    <h3 id="tituloTabla"></h3>

                    <button class="btn alert alert-info w-100" data-bs-toggle="modal"
                      data-bs-target="#crearTarea"><strong>Asignar Nueva Tarea</strong></button>


                    <table class="table table-striped " id="tablaCalendario">

                      <thead>
                        <tr>
                          <th scope="col">#</th>
                          <th scope="col">Juego</th>
                          <th scope="col">Categoría</th>
                          <th scope="col">Terminado</th>
                        </tr>
                      </thead>
                      <tbody id="bodyTabla">

                      </tbody>
                    </table>
                  </div>
                </div>

              </div>



            </div>

            <!--Modal de registro de nueva tarea-->

            <div class="modal fade" id="crearTarea" data-bs-backdrop="static">
              <!-- data-bs impide que se cierre al pulsar fuera del modal -->
              <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                <div class="modal-content">

                  <!-- cabecera del diálogo -->
                  <div class="modal-header">
                    <h4 class="modal-title">Crear Tarea</h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                  </div>

                  <!-- cuerpo del diálogo -->
                  <div class="modal-body alert alert-info">
                    <div class="container">
                      <div class="row">
                        <div class="col ">
                          <p id="diaModal"></p>
                          <form>
                            <div class="form-group">
                              <label for="juego">Juego:</label>
                              <select class="form-control" name="juego" id="selectJuego">
                                <!-- Opciones del select -->
                              </select>
                            </div>
                  
                            <div class="form-group">
                              <label for="frecuencia">Frecuencia:</label>
                              <select class="form-control" name="frecuencia" id="frecuencia">
                                <option value="0">Sólo hoy</option>
                                <option value="1">Cada día</option>
                                <option value="2">Todas las Semanas</option>
                              </select>
                            </div>
                          </form>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="asignarTarea">Asignar</button>
                  </div>

                </div>

              </div>
            </div>


  </section>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-p34f1UUtsS3wqzfto5wAAmdvj+osOnFyQFpp4Ua3gs/ZVWx6oOypYoCJhGGScy+8"
    crossorigin="anonymous"></script>

  <script src="https://cdn.jsdelivr.net/npm/moment@2.29.1/moment.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.5.32/moment-timezone-with-data.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@3.10.2/dist/fullcalendar.min.js"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>

  <script src="/javascripts/jsTerapeuta/funcionesAdmin.js"></script>


</body>

</html>